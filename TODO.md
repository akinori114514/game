# TODO

- [x] ゲームロジックの全体把握：主要なコンテキスト、hooks、UIコンポーネントを読み、進行フローを整理する
- [x] 日本語ドキュメント作成：ゲームのルール・数式・イベント・主要コマンドを md にまとめる（docs/game-overview.md を想定）
- [ ] リファクタリング計画と実施：状態管理/計算ロジックの分離、命名/コメントの整備、UI 周辺の整理ポイントを洗い出して適用する
- [x] デプロイ準備：akinori114514/game リポジトリへ push できる構成と GitHub Actions のビルド・デプロイ設定を用意する
- [x] 動作確認：npm install → npm run build / npm run dev で基本動作とビルドを確認する
- [x] 環境変数の統一：`VITE_GEMINI_API_KEY` に揃え、.env.local.example と README を更新する
- [x] 未実装補完：assignManager を実装して組織図操作を有効化する
- [x] 営業スケール調整：フェーズ/PMF/営業人員で単価・抵抗をスケールさせ、創業者営業の減衰を導入
- [x] SFX 追加：Web Audio で軽量効果音を実装して通知/クリック/成功/エラーを演出
- [x] 旧Pipeline UI の削除：マーケ/リード系の表示と pipeline_metrics を除去
- [x] APのUI表示と不足アラートを追加する
- [x] 営業ミニゲームで成功率のリアルタイム表示を出す
- [x] Seed開始直後に大型イベント発火を保証する
- [x] Seed序盤の営業成功補正を上げて初動を軽めにする
- [x] 好きなタイミングで財務サマリーを開けるモーダルを追加する
- [ ] MRR内訳UI（人数ベースの成長/ペナルティを表示）を追加する
- [x] プロダクト状態の可視化（PMF/品質/単価）
    - [x] GameStateにproductPhase/productQuality/averageUnitPrice/lastPmfDeltaなどの項目を追加
    - [x] PMFからフェーズを判定するロジックを共通化
    - [x] フェーズ・品質・営業/CS状況から平均単価を算出するロジックを追加
    - [x] ターン終了時にプロダクト状態を更新するフローを組み込み
    - [x] 画面上部にPMF/品質/平均単価の簡易表示バーを追加
    - [x] 財務モーダルと並ぶ「プロダクト状況」モーダルを追加し、フェーズ・単価要因を表示
    - [x] 営業ミニゲームにPMF/品質/単価のミニ表示枠を追加
- [x] MRR内訳UI（人数ベースの成長/ペナルティを表示）を追加する
